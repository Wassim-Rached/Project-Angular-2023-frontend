<div *ngIf="isLoadingPage; else page">
  <mat-progress-bar mode="query"></mat-progress-bar>
</div>

<ng-template #page>
  <form
    *ngIf="form"
    [formGroup]="form"
    class="container"
    (ngSubmit)="onSubmit()"
  >
    <app-message-text *ngIf="message" [message]="message"></app-message-text>
    <div>
      <label for="title" class="form-label">Title:</label>
      <input
        type="text"
        id="title"
        formControlName="title"
        class="form-control"
      />
    </div>
    <div class="form-group">
      <ng-select
        [items]="allCategories"
        [addTag]="true"
        [addTagText]="'Add new categorie'"
        bindLabel="name"
        [multiple]="true"
        placeholder="Select or add  categories"
        name="items"
        formControlName="categories"
      ></ng-select>
    </div>
    <div>
      <label for="description" class="form-label">Description:</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
      ></textarea>
    </div>
    <div>
      <label for="is_free" class="form-label">Is Free:</label>
      <input
        type="checkbox"
        id="is_free"
        formControlName="is_free"
        class="form-input"
      />
    </div>
    <div *ngIf="!isFree">
      <label class="form-label" for="price">Price:</label>
      <input
        class="form-control"
        type="text"
        id="price"
        formControlName="price"
      />
    </div>
    <div>
      <label class="form-label" for="max_participants">Max Participants:</label>
      <input
        class="form-control"
        type="number"
        id="max_participants"
        formControlName="max_participants"
      />
    </div>
    <div>
      <label for="photo" class="form-label">Photo:</label>
      <input
        type="file"
        id="photo"
        (change)="onFileChange($event)"
        [ngClass]="{
          'form-control': true
        }"
      />
    </div>
    <div>
      <label class="form-label" for="date">Date:</label>
      <input
        class="form-control"
        type="date"
        id="date"
        formControlName="date"
      />
    </div>
    <button
      type="submit"
      class="btn btn-primary mt-3"
      [disabled]="isSubmitting"
    >
      {{ isSubmitting ? "Modifying..." : "Modify" }}
    </button>
  </form>
</ng-template>
